<!doctype html>
<html lang="en">
<head>
<title>CORS | shira.at</title>
<link rel="icon" type="image/png" href="/URLIcon.png">
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="/style.css">
</head>
<body>
<h1>Bypass cors restrictions in javascript with PHP</h1>

<ul>
<li><a href="#problem">Problem</a></li>
<li><a href="#solution">Solution</a></li>
</ul>

<h3 id="problem">Problem</h3>
<p>
Modern Browsers don't allow you to send requests to another website that doesn't have the Cross-Origin Header set.<br>
<br>
My specific problem:<br>
I wanted to write a browser-based viewer of someone's REST API, but I couldn't get them via a Javascript request, only with non-browser requests.
</p>

<h3 id="solution">Solution</h3>
<p>
PHP doesn't care about Cross Origin requests and is easy to setup.<br>
<br>
Create a small "PHP proxy" to get the resource and forward it to your browser's javascript request.<br>
<br>
Example PHP code (filename: t.php):<br>
<pre>
&lt;?php
$json = file_get_contents('https://example.com/api/v1/status?key=XXX&server='.$_GET['id']);
$arr = json_decode($json, true); //Accessible Array from JSON answer
echo $arr['response']['serverstatus'];
?&gt;
</pre>
<br>
Now simply make an ajax call from javascript and access this resource over the PHP file.<br>
Javascript example:<br>
<pre>
return $.ajax({
  type: "GET",
  url: "https://myserver.com/t.php?id="+id
}).done(function(data) {
  document.body.innerHTML += data+"&lt;br&gt;";
});
</pre>
<br>
This is a quick and easy fix for testing, but should be fledged out for production usage. It is missing rate-limiting and caching on the PHP side.<br>
With a rate-limit you would refrain from spamming the target API and secure your own service from spam too.</p>
<br><br><br>
</body>
</html>

